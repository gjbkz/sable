#!/usr/bin/env node
const console = require('console');
const program = require('commander');
const {startServer} = require('..');
const packageJSON = require('../package.json');

program
.version(packageJSON.version)
.description('Starts a HTTP server for development')
.usage('[options] <documentRoot>')
.option('-p, --port <n>', 'A port number for HTTP, HTTPS (4000)', parseInt)
.option('-w, --wsport <n>', 'A port number for WS, WSS (port + 1)', parseInt)
.option('-b, --base <s>', 'An URL used as the 2nd argument of the URL constructor (http://localhost)')
.option('-i, --index <s>', 'A filename of index (index.html)')
.option('-a, --reloadscript <s>', 'An URL for autoreload script (autoreload.js)')
.parse(process.argv);

startServer(program)
.catch((error) => {
    console.error(error);
    process.exit(1);
});
